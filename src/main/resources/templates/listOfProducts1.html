<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>

  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" th:href="@{/assets/css/bootstrap.min.css}"/>


  <!-- Additional CSS Files -->
  <link rel="stylesheet" type="text/css" th:href="@{/assets/css/fontawesome.css}"/>
  <link rel="stylesheet" type="text/css" th:href="@{/assets/css/tooplate-main.css}"/>
  <link rel="stylesheet" type="text/css" th:href="@{/assets/css/owl.css}"/>
  <link rel="stylesheet" type="text/css" th:href="@{/assets/css/custom.css}"/>
  <link rel="stylesheet" type="text/css" th:href="@{/assets/css/tables.css}"/>
</head>
<body>

<div class="featured container no-gutter">


  <nav class="navbar navbar-expand-lg navbar-light bg-light">

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item ">
          <a sec:authorize="isAuthenticated()" class="nav-link" href="/home">Home <span class="sr-only">(current)</span></a>
        </li>

        <li class="nav-item">
          <a sec:authorize="hasRole('ROLE_BIDDER')" class="nav-link" href="/myProducts">My products <span class="sr-only">(current)</span></a>
        </li>

        <li class="nav-item">
          <a sec:authorize="hasRole('ROLE_SELLER')"class="nav-link" href="/addItem">Add Item</a>
        </li>
        <li class="nav-item active">
          <a sec:authorize="hasRole('ROLE_SELLER')"class="nav-link" href="/listOfProducts">Products List</a>
        </li>
        <li class="nav-item">
          <a sec:authorize="isAnonymous()" class="nav-link" href="/registration">Registration</a>
        </li>
        <li class="nav-item">
          <a sec:authorize="isAnonymous()" class="nav-link " href="/login">Login</a>
        </li>
        <li class="nav-item">
          <a sec:authorize="isAuthenticated()" class="nav-link " href="/logout">Logout</a>
        </li>

        <!-- Product category selection area -->

        <li class="nav-item active">
          <a sec:authorize="isAuthenticated()" class="nav-link ">Product category:</a>
        </li>

        <!-- Product category selection area -->

        <form class="nav-item" th:object="${productDto}" th:action="@{/listOfProducts1}" enctype="multipart/form-data">
          <div class="nav-item">
            <div class="">
              <select class="form-control" name="color" id = "product_category" th:field = "*{category}">
                <option th:each="colorOpt : ${T(com.sda.onlineAuction.model.Category).values()}"
                        th:value="${colorOpt.name()}" th:text="${colorOpt.name()}"></option>
              </select>
            </div>
          </div>

          <!-- Product button area-->
          <div class="nav-item" align ="center">
            <label class="nav-item" for="singlebutton"></label>
            <div class="">
              <button id="singlebutton" name="singlebutton" class="btn btn-primary" type="submit">Search!</button>
            </div>
          </div>

        </form>


      </ul>
    </div>
  </nav>
  <h1> All Products</h1>
  <div class="table-background">


    <table class = "products-table"  >
      <thead>
      <tr>
        <th>Name</th>
        <th>Picture</th>
        <th>Description</th>
        <th>Category</th>
        <th>End Bid Date</th>
        <th>Price</th>
        <th>Actions</th>
      </tr>
      </thead>

      <tbody>

      <tr th:each="product:${products}">
        &nbsp;
        <td th:text="${product.name}">Name</td>
        <td>
          <img width="100px" th:src="${'data:image/png;base64,'+product.image}">
        </td>
        &nbsp;
        <td th:text="${product.description}">Description</td>
        &nbsp;
        <td th:text="${product.category}">Category</td>
        &nbsp;
        <td th:text="${product.endDateTime}">End Bid Date</td>
        &nbsp;
        <td th:text="${product.startBidingPrice}">Price</td>
        &nbsp;
        <td>
          &nbsp;
          <a th:href="@{'/editItem/' + ${product.id}}">Edit</a>
          &nbsp;
          <a th:href="@{'/deleteItem/' + ${product.id}}"><span>Delete</span></a>
          &nbsp;
        </td>
      </tr>

      </tbody>

    </table>

  </div>

</div>
</div>
</body>
</html>